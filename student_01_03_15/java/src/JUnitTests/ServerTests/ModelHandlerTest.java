package JUnitTests.ServerTests;

import static org.junit.Assert.*;

import org.junit.Test;

import proxy.IProxy;
import proxy.Proxy;

public class ModelHandlerTest {
	
	private IProxy proxy = new Proxy();

	@Test
	public void test() {
		System.out.println("Testing Model Handler");

		
		Proxy.port = "8081";
		proxy.post("/user/login", "{username: \"a\",password: \"a\"}");
		proxy.post("/games/join", "{id: 0,color:\"white\"}");
		
		String response = proxy.get("/game/model?version=-1");
		System.out.println(response);
		assertTrue(response.equals("{\"bank\":{\"brick\":19,\"ore\":19,\"sheep\":19,\"wheat\":19,\"wood\":19},\"chat\":{\"lines\":[]},\"log\":{\"lines\":[]},\"map\":{\"hexes\":[{\"location\":{\"x\":0,\"y\":-2},\"resource\":\"wood\",\"number\":11},{\"location\":{\"x\":0,\"y\":-1},\"resource\":\"ore\",\"number\":6},{\"location\":{\"x\":0,\"y\":0},\"resource\":\"wheat\",\"number\":11},{\"location\":{\"x\":0,\"y\":1},\"resource\":\"sheep\",\"number\":9},{\"location\":{\"x\":0,\"y\":2},\"resource\":\"wood\",\"number\":6},{\"location\":{\"x\":1,\"y\":-2},\"resource\":\"sheep\",\"number\":12},{\"location\":{\"x\":1,\"y\":-1},\"resource\":\"brick\",\"number\":5},{\"location\":{\"x\":1,\"y\":0},\"resource\":\"wood\",\"number\":4},{\"location\":{\"x\":1,\"y\":1},\"resource\":\"ore\",\"number\":3},{\"location\":{\"x\":2,\"y\":-2},\"resource\":\"wheat\",\"number\":9},{\"location\":{\"x\":2,\"y\":-1},\"resource\":\"sheep\",\"number\":10},{\"location\":{\"x\":2,\"y\":0},\"resource\":\"wheat\",\"number\":8},{\"location\":{\"x\":-1,\"y\":-1},\"resource\":\"brick\",\"number\":4},{\"location\":{\"x\":-1,\"y\":0},\"resource\":\"wood\",\"number\":3},{\"location\":{\"x\":-1,\"y\":1},\"resource\":\"sheep\",\"number\":10},{\"location\":{\"x\":-1,\"y\":2},\"resource\":\"wheat\",\"number\":2},{\"location\":{\"x\":-2,\"y\":0},\"resource\":\"desert\",\"number\":0},{\"location\":{\"x\":-2,\"y\":1},\"resource\":\"brick\",\"number\":8},{\"location\":{\"x\":-2,\"y\":2},\"resource\":\"ore\",\"number\":5}],\"ports\":[{\"resource\":\"three\",\"location\":{\"x\":0,\"y\":-3},\"direction\":\"S\",\"ratio\":3},{\"resource\":\"sheep\",\"location\":{\"x\":2,\"y\":-3},\"direction\":\"SW\",\"ratio\":2},{\"resource\":\"three\",\"location\":{\"x\":3,\"y\":-2},\"direction\":\"SW\",\"ratio\":3},{\"resource\":\"three\",\"location\":{\"x\":3,\"y\":0},\"direction\":\"NW\",\"ratio\":3},{\"resource\":\"brick\",\"location\":{\"x\":1,\"y\":2},\"direction\":\"N\",\"ratio\":2},{\"resource\":\"wood\",\"location\":{\"x\":-1,\"y\":3},\"direction\":\"N\",\"ratio\":2},{\"resource\":\"three\",\"location\":{\"x\":-3,\"y\":3},\"direction\":\"NE\",\"ratio\":3},{\"resource\":\"wheat\",\"location\":{\"x\":-3,\"y\":1},\"direction\":\"SE\",\"ratio\":2},{\"resource\":\"ore\",\"location\":{\"x\":-2,\"y\":-1},\"direction\":\"SE\",\"ratio\":2}],\"roads\":[{\"owner\":0,\"location\":{\"x\":0,\"y\":0,\"direction\":\"N\"}},{\"owner\":0,\"location\":{\"x\":1,\"y\":0,\"direction\":\"N\"}},{\"owner\":1,\"location\":{\"x\":0,\"y\":1,\"direction\":\"NE\"}},{\"owner\":1,\"location\":{\"x\":-1,\"y\":1,\"direction\":\"NW\"}},{\"owner\":2,\"location\":{\"x\":0,\"y\":-1,\"direction\":\"NW\"}},{\"owner\":2,\"location\":{\"x\":3,\"y\":-1,\"direction\":\"NW\"}},{\"owner\":3,\"location\":{\"x\":0,\"y\":2,\"direction\":\"NE\"}},{\"owner\":3,\"location\":{\"x\":1,\"y\":-1,\"direction\":\"NE\"}}],\"settlements\":[{\"owner\":0,\"location\":{\"x\":0,\"y\":0,\"direction\":\"NW\"}},{\"owner\":0,\"location\":{\"x\":1,\"y\":0,\"direction\":\"NE\"}},{\"owner\":1,\"location\":{\"x\":-1,\"y\":1,\"direction\":\"NW\"}},{\"owner\":1,\"location\":{\"x\":0,\"y\":1,\"direction\":\"NE\"}},{\"owner\":2,\"location\":{\"x\":0,\"y\":-1,\"direction\":\"NW\"}},{\"owner\":2,\"location\":{\"x\":2,\"y\":-1,\"direction\":\"E\"}},{\"owner\":3,\"location\":{\"x\":0,\"y\":2,\"direction\":\"NE\"}},{\"owner\":3,\"location\":{\"x\":1,\"y\":-1,\"direction\":\"NE\"}}],\"cities\":[],\"radius\":3,\"robber\":{\"x\":-2,\"y\":0}},\"players\":[{\"color\":\"white\",\"discarded\":false,\"monuments\":0,\"name\":\"a\",\"newDevCards\":{\"monopoly\":0,\"monument\":0,\"roadBuilding\":0,\"soldier\":0,\"yearOfPlenty\":0},\"oldDevCards\":{\"monopoly\":0,\"monument\":0,\"roadBuilding\":0,\"soldier\":0,\"yearOfPlenty\":0},\"playerIndex\":0,\"playedDevCard\":false,\"playerID\":0,\"resources\":{\"brick\":0,\"ore\":0,\"sheep\":0,\"wheat\":0,\"wood\":0},\"roads\":13,\"settlements\":3,\"cities\":4,\"soldiers\":0,\"victoryPoints\":0},{\"color\":\"yellow\",\"discarded\":false,\"monuments\":0,\"name\":\"b\",\"newDevCards\":{\"monopoly\":0,\"monument\":0,\"roadBuilding\":0,\"soldier\":0,\"yearOfPlenty\":0},\"oldDevCards\":{\"monopoly\":0,\"monument\":0,\"roadBuilding\":0,\"soldier\":0,\"yearOfPlenty\":0},\"playerIndex\":1,\"playedDevCard\":false,\"playerID\":1,\"resources\":{\"brick\":0,\"ore\":0,\"sheep\":0,\"wheat\":0,\"wood\":0},\"roads\":13,\"settlements\":3,\"cities\":4,\"soldiers\":0,\"victoryPoints\":0},{\"color\":\"blue\",\"discarded\":false,\"monuments\":0,\"name\":\"c\",\"newDevCards\":{\"monopoly\":0,\"monument\":0,\"roadBuilding\":0,\"soldier\":0,\"yearOfPlenty\":0},\"oldDevCards\":{\"monopoly\":0,\"monument\":0,\"roadBuilding\":0,\"soldier\":0,\"yearOfPlenty\":0},\"playerIndex\":2,\"playedDevCard\":false,\"playerID\":2,\"resources\":{\"brick\":0,\"ore\":0,\"sheep\":0,\"wheat\":0,\"wood\":0},\"roads\":13,\"settlements\":3,\"cities\":4,\"soldiers\":0,\"victoryPoints\":0},{\"color\":\"green\",\"discarded\":false,\"monuments\":0,\"name\":\"d\",\"newDevCards\":{\"monopoly\":0,\"monument\":0,\"roadBuilding\":0,\"soldier\":0,\"yearOfPlenty\":0},\"oldDevCards\":{\"monopoly\":0,\"monument\":0,\"roadBuilding\":0,\"soldier\":0,\"yearOfPlenty\":0},\"playerIndex\":3,\"playedDevCard\":false,\"playerID\":3,\"resources\":{\"brick\":0,\"ore\":0,\"sheep\":0,\"wheat\":0,\"wood\":0},\"roads\":13,\"settlements\":3,\"cities\":4,\"soldiers\":0,\"victoryPoints\":0}],\"tradeOffer\":{\"sender\":-1,\"receiver\":-1,\"offer\":{\"brick\":0,\"ore\":0,\"sheep\":0,\"wheat\":0,\"wood\":0}},\"turnTracker\":{\"currentTurn\":0,\"status\":\"ROLLING\",\"longestRoad\":-1,\"largestArmy\":-1},\"version\":1,\"winner\":-1}"));
	
		System.out.println("Passed Model Handler Tests");	
	}
}
